<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>

    <link rel="stylesheet" href="admin-style.css">

    <!-- Font Awesome v5 -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <link rel="icon" type="image/png" href="/images/favicon.png">
</head>
<body>

    <div class="dashboard-container">
        <header>Admin Dashboard</header>
        <main>
            <div class="actions-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà">
                </div>
                <a href="add-location.html" class="add-button" style="text-decoration: none;">
                    <i class="fas fa-plus"></i> Add New Location
                </a>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Category</th>
                        <th>Description</th>
                        <th>Opentime</th>
                        <th>Closetime</th>
                        <th>Latitude</th>
                        <th>Longitude</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="location-table-body"></tbody>
            </table>
            
            <div class="pagination" id="pagination-wrapper"></div>
        </main>
    </div>

    <div class="bottom-nav">
        <a href="admin-map.html" class="nav-item">
            <i class="fas fa-home"></i><span>Home</span>
        </a>
        <a href="category.html" class="nav-item active">
            <i class="fas fa-cog"></i><span>Change Category</span>
			
        </a>
		<a href="admin-report.html" class="nav-item "> <i class="fas fa-flag"></i><span>Admin Report</span>
		       </a>
        <a href="/admin/profile_logged_in.html" class="nav-item">
            <i class="fas fa-user"></i><span>Profile</span>
        </a>
    </div>

    <script src="dashboard-script.js"></script>
	
    <script type="module">
        import { protectPage } from "../authGuard.js";
        protectPage(true); // üß© ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ admin
    </script>
	<script>
	document.addEventListener("DOMContentLoaded", () => {

	    const raw = localStorage.getItem("student_info");
	    if (!raw) return;

	    try {
	        const parsed = JSON.parse(raw);
	        const data = parsed.data ? parsed.data : parsed;

	        // ‚úî ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠ ‡πÉ‡∏´‡πâ‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ Profile
	        if (data.displayname_en) {
	            const firstName = data.displayname_en.split(" ")[0];
	            const navLabel = document.querySelector(".bottom-nav .nav-item:last-child span");
	            if (navLabel) navLabel.textContent = firstName;
	        }

	    } catch (err) {
	        console.error("Error reading admin user", err);
	    }

	});
	</script>

</body>
</html>
